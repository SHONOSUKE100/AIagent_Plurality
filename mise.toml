[tasks.simulation]
run = "uv run main.py --persona-path {{ persona_path | default(value=\"data/persona/persona.json\") }}{% if seeding_path is defined %} --seeding-path {{ seeding_path }}{% endif %}{% if seed_post_count is defined %} --seed-post-count {{ seed_post_count }}{% endif %}{% if llm_rounds is defined %} --llm-rounds {{ llm_rounds }}{% endif %}{% if agent_action_ratio is defined %} --agent-action-ratio {{ agent_action_ratio }}{% endif %}{% if recommendation_type is defined %} --recommendation-type {{ recommendation_type }}{% endif %}{% if output_dir is defined %} --output-dir {{ output_dir }}{% endif %}{% if run_name is defined %} --run-name {{ run_name }}{% endif %}{% if note is defined %} --note {{ note }}{% endif %}{% if model_type is defined %} --model-type {{ model_type }}{% endif %}{% if model_temperature is defined %} --model-temperature {{ model_temperature }}{% endif %}{% if embedding_model is defined %} --embedding-model {{ embedding_model }}{% endif %}{% if embedding_batch_size is defined %} --embedding-batch-size {{ embedding_batch_size }}{% endif %}{% if skip_embeddings %} --skip-embeddings{% endif %} "

[tasks.random]
run = "uv run main.py --persona-path data/persona/persona_100.json --seeding-path data/seeding.json --seed-post-count 20 --llm-rounds 5 --agent-action-ratio 0.２ --recommendation-type random --output-dir results --run-name random-100agent-100round --note \"randomでテスト\" --model-type gpt-5-nano-2025-08-07 --embedding-model text-embedding-3-small --embedding-batch-size 16"

[tasks.collaborative]
run = """
uv run main.py \
  --persona-path data/persona/persona_100.json \
  --seeding-path data/seeding.json \
  --seed-post-count 20 \
  --llm-rounds 20 \
  --agent-action-ratio 0.3 \
  --recommendation-type collaborative \
  --output-dir results \
  --run-name random-100agent-100round-collaborative \
  --note "randomでテスト" \
  --model-type gpt-5-nano-2025-08-07 \
  --embedding-model text-embedding-3-small \
  --embedding-batch-size 16
"""

[tasks.neo4j-up]
run = "docker compose up neo4j -d"

[tasks.neo4j-down]
run = "docker compose down"

[tasks.neo4j-export]
run = "uv run src/visualization/neo4j_export.py --neo4j-password {{ neo4j_password | default(value=\"neo4j1234\") }}"

[tasks.neodash-up]
run = "docker compose up neodash -d"
description = "Start NeoDash dashboard (requires neo4j to be running)"

[tasks.neodash-import]
run = "uv run src/visualization/neodash_import.py --neo4j-password {{ neo4j_password | default(value=\"neo4j1234\") }}"
description = "Import pre-configured dashboard into Neo4j"

[tasks.dashboard-up]
run = "docker compose up neo4j neodash -d && sleep 5 && uv run src/visualization/neodash_import.py"
description = "Start Neo4j + NeoDash and import dashboard"

[tasks.evaluate]
run = "uv run src/evaluation/main.py"
